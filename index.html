<!DOCTYPE html>
<html>
<head>
<!-- For testing the edfjs in the browser -->
<script src="./dist/edf.min.js"></script>
<!-- Use this to include in production website -->
<!-- <script src="http://unpkg.com/edfjs"></script> -->
<script>
	var edf = null;
	async function read_file() {
		var files = document.getElementById("fileSelector").files;
		if (files.length > 0) {
			edf = await edfjs.EDF().from_file(files[0], header_only=false);
			show_data();
		}
	}

	async function show_data() {
		var txt = "File Header<br>";
		for (var key in edf.fields) {
			txt += key + " " + edf[key] + "<br>";
		}
		var label = edf.channels[0].label;
		txt += "Here a few samples of channel "+label+" <br>";
		var data = await edf.get_physical_samples(0.0, 0.1, [label]);
		for (var d in data[label]) {
			txt += data[label][d]+"<br>";
		}
		document.getElementById("content").innerHTML = txt;
	}
</script>
</head>
<body onload='read_file()'>
<div><input type="file" id="fileSelector" onchange="read_file();" accept=".edf"/></div>
<div id="content"></div>
</body>
</html>


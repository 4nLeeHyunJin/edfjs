!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.edfjs=e()}}(function(){return function(){function e(n,r,t){function i(l,s){if(!r[l]){if(!n[l]){var u="function"==typeof require&&require;if(!s&&u)return u(l,!0);if(a)return a(l,!0);var o=new Error("Cannot find module '"+l+"'");throw o.code="MODULE_NOT_FOUND",o}var c=r[l]={exports:{}};n[l][0].call(c.exports,function(e){var r=n[l][1][e];return i(r||e)},c,c.exports,e,n,r,t)}return r[l].exports}for(var a="function"==typeof require&&require,l=0;l<t.length;l++)i(t[l]);return i}return e}()({1:[function(e,n,r){"use strict";var t=function(e){return String(e).trim()},i=function(e,n,r){var t=new Uint8Array(e,n,r-n);return String.fromCharCode.apply(null,t)},a=function(e,n){if(!e)throw"Assertion Error: "+n},l=function(e,n,r){r=r||"20";var t,i,a,l,s,u,o;if(e.includes("-")?(e=e.split("-"),t=e[0],i=e[1],a=e[2]):e.includes("/")?(e=e.split("/"),t=e[2],i=e[0],a=e[1]):e.includes(".")&&(e=e.split("."),t=e[2],i=e[1],a=e[0]),i=+i-1,2==t.length&&(t=r+t),n=n.replace(/\./g,":").split(":"),l=n[0],s=n[1],u=n[2],o=n[3],o&&3!=o.length){for(var c=0;c<3-o.length;c++)o+="0";o=o.substring(0,4)}return new Date(Date.UTC(t,i,a,l,s,u,o||0))},s=function(e){e=e||{},e.fields={label:[t,16],channel_type:[t,80],physical_dimension:[t,8],physical_minimum:[Number,8],physical_maximum:[Number,8],digital_minimum:[Number,8],digital_maximum:[Number,8],prefiltering:[t,80],num_samples_per_record:[Number,8],reserved:[t,32]};var n=null,r=null,i=function(e){return n*(e+r)},a=function(t,i){return null==e.num_samples_per_record?(console.log("Error: allocate_blob called on uninitialized channel."),null):(e.blob=new Float32Array(t*e.num_samples_per_record),n=(this.physical_maximum-this.physical_minimum)/(this.digital_maximum-this.digital_minimum),r=this.physical_maximum/n-this.digital_maximum,void(e.sampling_rate=e.num_samples_per_record/i))},l=function(n,r){for(var t=n*e.num_samples_per_record,a=0;a<e.num_samples_per_record;a++)e.blob[t+a]=i(r[a])},s=function(n,r){var t=n*e.sampling_rate,i=r*e.sampling_rate;return e.blob.slice(t,t+i)};return e.set_record=l,e.get_physical_samples=s,e.digital2physical=i,e.init=a,e},u=function(e){e=e||{},e.fields={version:[t,8],pid:[t,80],rid:[t,80],startdate:[t,8],starttime:[t,8],num_header_bytes:[Number,8],reserved:[t,44],num_records:[Number,8],record_duration:[Number,8],num_channels:[Number,4]};var n=256,r=2,u=function(n){var r=0;for(var t in e.fields){var i=e.fields[t][0],a=r+e.fields[t][1];e[t]=i(n.substring(r,a)),r=a}e.startdatetime=l(e.startdate,e.starttime)},o=function(n){e.channels=[];for(var r=0;r<e.num_channels;r++)e.channels.push(s());var t=0,i=e.channels[0].fields;for(var a in i)for(var l=i[a][0],u=i[a][1],r=0;r<e.num_channels;r++){var o=t+u;e.channels[r][a]=l(n.substring(t,o)),t=o}e.channel_by_label={};for(var r in e.channels)e.channel_by_label[e.channels[r].label]=e.channels[r]},c=function(n){for(var r=0,t=0;t<e.num_channels;t++)r+=e.channels[t].num_samples_per_record;var i=r*e.num_records,l=(n.byteLength-e.num_header_bytes)/2;return e.duration=e.record_duration*l/r,a(l==i,"Header implies "+i+" samples; "+l+" found."),l},m=function(n){for(var t=[0],i=0;i<e.num_channels;i++)t.push(t[i]+e.channels[i].num_samples_per_record);var a=t[e.channels.length];try{var l=c(n)}catch(s){console.error(s);var l=(n.byteLength-e.num_header_bytes)/r}for(var u=new Int16Array(n,e.num_header_bytes,l),i=0;i<e.num_channels;i++)e.channels[i].init(e.num_records,e.record_duration);for(var o=0;o<e.num_records;o++)for(var i=0;i<e.num_channels;i++)e.channels[i].set_record(o,u.slice(o*a+t[i],o*a+t[i+1]))},f=function(r,t){t=t||!1;var a=i(r,0,n);return u(a),0==e.num_channels?null:(a=i(r,n,e.num_header_bytes),o(a),c(r),void(0==t&&m(r)))},_=function(n,r,t){t=t||!1;var i=new FileReader;return e.filename=n.name,i.onload=function(e){f(e.target.result,t),r(e)},i.readAsArrayBuffer(n),e},d=function(n,r,t){var i={};for(var a in t){var l=t[a];i[l]=e.channel_by_label[l].get_physical_samples(n,r)}return i},h=function(n){return e.startdatetime.getTime()+n},p=function(e){return new Date(h(e))};return e.from_file=_,e.relative_date=p,e.get_physical_samples=d,e.read_header_from_string=u,e};r.string_from_buffer=i,r.Channel=s,r.EDF=u},{}]},{},[1])(1)});
